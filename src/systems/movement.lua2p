local Concord = require("modules.concord.concord")

local Movement = Concord.system({
	pool = {"speed", "gravity", "body", "movement"},
})

function Movement:update(dt)
	for _, e in ipairs(self.pool) do
		if e.body.can_move then
			local speed = e.speed
			local vel_x = 0
			local vel_y = e.gravity.value * dt

			if e.body.dx ~= 0 then
				vel_x = speed.vx * e.body.dx * dt
			end

			e.body.vel_x = vel_x
			e.body.vel_y = vel_y
		end
	end
end

return Movement
