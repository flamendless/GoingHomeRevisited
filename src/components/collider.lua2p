local Concord = require("modules.concord.concord")

!if _DEV then
local Enum = require("modules.enum.enum")
local filters = Enum("touch", "slide", "cross", "bounce")
!end

Concord.component("bump")
Concord.component("wall")
Concord.component("ground")

Concord.component("req_col_dir", function(c, dir)
	@@assert(type(dir) == "number" and (dir == -1 or dir == 1))
	c.value = dir
end)

Concord.component("collider", function(c, w, h, filter)
	@@assert(type(w) == "number")
	@@assert(type(h) == "number")
	@@sassert(filter, type(filter) == "string")
	c.w = w
	c.h = h
	c.w_h = w * 0.5
	c.h_h = h * 0.5
	c.is_hit = false
	c.filter = nil
	c.normal = {x = 0, y = 0}

	if filter then
		!if _DEV then
		c.filter = filters[filter]
		!else
		c.filter = filter
		!end
	end
end)

Concord.component("collider_offset", function(c, ox, oy)
	@@assert(type(ox) == "number")
	@@assert(type(oy) == "number")
	c.ox = ox
	c.oy = oy
end)

Concord.component("collider_circle", function(c, size, ox, oy)
	@@assert(type(size) == "number")
	@@sassert(ox, type(ox) == "number")
	@@sassert(oy, type(oy) == "number")
	c.size = size
	c.ox = ox
	c.oy = oy
	c.is_hit = false
end)
